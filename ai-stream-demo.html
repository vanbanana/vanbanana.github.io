<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI æµå¼è¾“å‡ºæ¼”ç¤º</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Inter', system-ui, sans-serif; background: #0f172a; color: #f1f5f9; min-height: 100vh; padding: 16px; }
.container { max-width: 500px; margin: 0 auto; }
.chat-box { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; overflow: hidden; }
.chat-header { padding: 12px 16px; background: rgba(0,0,0,0.2); border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; gap: 10px; }
.chat-header .icon { font-size: 20px; }
.chat-header .info strong { display: block; font-size: 14px; }
.chat-header .info .status { font-size: 11px; color: #10b981; }
.chat-messages { padding: 16px; min-height: 250px; max-height: 350px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
.message { display: flex; gap: 10px; max-width: 85%; }
.message.user { align-self: flex-end; flex-direction: row-reverse; }
.message .avatar { width: 28px; height: 28px; border-radius: 50%; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; }
.message .content { padding: 10px 14px; border-radius: 12px; font-size: 13px; line-height: 1.5; white-space: pre-wrap; }
.message.user .content { background: #3b82f6; color: white; border-bottom-right-radius: 4px; }
.message.assistant .content { background: rgba(255,255,255,0.1); border-bottom-left-radius: 4px; }
.cursor { animation: blink 1s infinite; color: #3b82f6; }
@keyframes blink { 0%,50% { opacity: 1; } 51%,100% { opacity: 0; } }
.chat-input { display: flex; gap: 8px; padding: 12px 16px; border-top: 1px solid rgba(255,255,255,0.1); }
.chat-input input { flex: 1; padding: 10px 14px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white; font-size: 13px; }
.chat-input input:focus { outline: none; border-color: #3b82f6; }
.chat-input button { padding: 10px 20px; background: #3b82f6; border: none; border-radius: 8px; color: white; font-size: 13px; cursor: pointer; }
.chat-input button:disabled { opacity: 0.5; }
.welcome { text-align: center; padding: 20px; color: #94a3b8; font-size: 13px; }
.tips { margin-top: 16px; padding: 12px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; }
.tips h4 { font-size: 12px; color: #94a3b8; margin-bottom: 8px; }
.tips p { font-size: 11px; color: #64748b; line-height: 1.6; }
</style>
</head>
<body>
<div class="container">
  <div class="chat-box">
    <div class="chat-header">
      <span class="icon">ğŸ¤–</span>
      <div class="info">
        <strong>AI åŠ©æ‰‹</strong>
        <span class="status" id="status">åœ¨çº¿</span>
      </div>
    </div>
    <div class="chat-messages" id="messages">
      <div class="welcome">ğŸ‘‹ ä½ å¥½ï¼è¯•è¯•è¾“å…¥"æ¨èæ–‡ç« "æˆ–"å­¦ä¹ Vue"</div>
    </div>
    <div class="chat-input">
      <input id="input" placeholder="è¾“å…¥æ¶ˆæ¯..." onkeydown="if(event.key==='Enter')sendMessage()" />
      <button onclick="sendMessage()" id="sendBtn">å‘é€</button>
    </div>
  </div>
  <div class="tips">
    <h4>ğŸ’¡ æµå¼è¾“å‡ºåŸç†</h4>
    <p>ä½¿ç”¨ Server-Sent Events (SSE) å®ç°å®æ—¶æµå¼å“åº”ï¼Œæ— éœ€ç­‰å¾…å®Œæ•´å›å¤å³å¯å¼€å§‹æ˜¾ç¤ºå†…å®¹ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
  </div>
</div>

<script>
const responses = {
  'æ¨è': 'æ ¹æ®ä½ çš„å…´è¶£ï¼Œæˆ‘æ¨èä»¥ä¸‹æ–‡ç« ï¼š\n\nğŸ“ Vue 3 Composition API å…¥é—¨\nğŸ“ GSAP åŠ¨ç”»å®æˆ˜æŒ‡å—\nğŸ“ TypeScript ç±»å‹ä½“æ“\n\nè¿™äº›æ–‡ç« æ¶µç›–äº†å‰ç«¯å¼€å‘çš„æ ¸å¿ƒæŠ€æœ¯æ ˆã€‚',
  'å­¦ä¹ ': 'æˆ‘å¯ä»¥å¸®ä½ åˆ¶å®šå­¦ä¹ è®¡åˆ’ï¼\n\n1. ğŸ“š ç”Ÿæˆå­¦ä¹ æŒ‡å—\n2. â“ åˆ›å»ºçŸ¥è¯†æµ‹éªŒ\n3. ğŸ´ åˆ¶ä½œå¤ä¹ é—ªå¡\n\nè¯·å‘Šè¯‰æˆ‘ä½ æƒ³å­¦ä¹ ä»€ä¹ˆä¸»é¢˜ï¼Ÿ',
  'vue': 'Vue 3 æ˜¯ä¸€ä¸ªæ¸è¿›å¼ JavaScript æ¡†æ¶ã€‚\n\næ ¸å¿ƒç‰¹æ€§ï¼š\nâ€¢ Composition API - æ›´å¥½çš„é€»è¾‘å¤ç”¨\nâ€¢ å“åº”å¼ç³»ç»Ÿ - åŸºäº Proxy\nâ€¢ æ›´å°çš„åŒ…ä½“ç§¯\nâ€¢ æ›´å¥½çš„ TypeScript æ”¯æŒ',
  'default': 'ä½ å¥½ï¼æˆ‘æ˜¯åšå®¢ AI åŠ©æ‰‹ï¼Œå¯ä»¥å¸®ä½ ï¼š\n\nâ€¢ æ¨èç›¸å…³æ–‡ç« \nâ€¢ è§£ç­”æŠ€æœ¯é—®é¢˜\nâ€¢ ç”Ÿæˆå­¦ä¹ è®¡åˆ’\n\næœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ'
};

let isStreaming = false;

function getResponse(msg) {
  const m = msg.toLowerCase();
  if (m.includes('æ¨è') || m.includes('æ–‡ç« ')) return responses['æ¨è'];
  if (m.includes('å­¦ä¹ ') || m.includes('å­¦')) return responses['å­¦ä¹ '];
  if (m.includes('vue')) return responses['vue'];
  return responses['default'];
}

function addMessage(role, content, streaming = false) {
  const container = document.getElementById('messages');
  const welcome = container.querySelector('.welcome');
  if (welcome) welcome.remove();
  
  const div = document.createElement('div');
  div.className = 'message ' + role;
  div.innerHTML = `
    <div class="avatar">${role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–'}</div>
    <div class="content">${content}${streaming ? '<span class="cursor">|</span>' : ''}</div>
  `;
  container.appendChild(div);
  container.scrollTop = container.scrollHeight;
  return div;
}

async function streamText(element, text) {
  const contentEl = element.querySelector('.content');
  let current = '';
  for (let i = 0; i < text.length; i++) {
    current += text[i];
    contentEl.innerHTML = current + '<span class="cursor">|</span>';
    document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
    await new Promise(r => setTimeout(r, 25 + Math.random() * 15));
  }
  contentEl.innerHTML = current;
}

async function sendMessage() {
  const input = document.getElementById('input');
  const msg = input.value.trim();
  if (!msg || isStreaming) return;
  
  input.value = '';
  isStreaming = true;
  document.getElementById('sendBtn').disabled = true;
  document.getElementById('status').textContent = 'æ­£åœ¨è¾“å…¥...';
  
  addMessage('user', msg);
  await new Promise(r => setTimeout(r, 400));
  
  const response = getResponse(msg);
  const msgEl = addMessage('assistant', '', true);
  await streamText(msgEl, response);
  
  isStreaming = false;
  document.getElementById('sendBtn').disabled = false;
  document.getElementById('status').textContent = 'åœ¨çº¿';
}
</script>
</body>
</html>
