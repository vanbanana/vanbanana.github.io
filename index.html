<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººå·¥æ™ºèƒ½å¤ä¹ é¢˜åº“ - é”™é¢˜åŠ å¼ºç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">
    <style>
        body { font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f3f4f6; }
        .code-block { font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
        .answer-panel { transition: all 0.3s ease-in-out; }
        .hidden-panel { display: none; }
        .nav-item.active { background-color: #2563eb; color: white; }
        
        /* é€‰é¡¹äº¤äº’æ ·å¼ */
        .option-btn {
            transition: all 0.2s;
            border: 2px solid #e5e7eb;
        }
        .option-btn:hover:not(:disabled) {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        .option-btn.correct {
            background-color: #dcfce7 !important;
            border-color: #22c55e !important;
            color: #15803d !important;
        }
        .option-btn.wrong {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #b91c1c !important;
        }
        .option-btn:disabled {
            cursor: default;
        }
        
        /* é”™é¢˜æœ¬ç‰¹æ®Šæ ·å¼ */
        .mistake-mode .option-btn.wrong {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
    </style>
</head>
<body class="h-screen flex flex-col md:flex-row overflow-hidden">

    <!-- Sidebar Navigation -->
    <aside class="w-full md:w-64 bg-white shadow-md flex-shrink-0 overflow-y-auto z-10 flex flex-col">
        <div class="p-6 border-b">
            <h1 class="text-xl font-bold text-gray-800">ğŸ¤– AIå¤ä¹ é¢˜åº“</h1>
            <p class="text-xs text-gray-500 mt-1">é”™é¢˜æ”»å…‹ç‰ˆ Â· ç›´åˆ°ä¸å†é”™ä¸ºæ­¢</p>
        </div>
        <nav class="p-4 space-y-2 flex-1">
            <button onclick="filterCategory('all')" class="nav-item active w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors font-medium text-sm flex justify-between items-center">
                <span>ğŸ“š å…¨éƒ¨é¢˜ç›®</span>
                <span id="count-all" class="text-xs opacity-75 bg-gray-200 px-2 py-0.5 rounded-full">0</span>
            </button>
            <button onclick="filterCategory('mistakes')" class="nav-item w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors font-medium text-sm flex justify-between items-center text-red-600">
                <span>âŒ é”™é¢˜æœ¬ (é‡åš)</span>
                <span id="count-mistakes" class="text-xs font-bold bg-red-100 text-red-600 px-2 py-0.5 rounded-full">0</span>
            </button>
            <div class="h-px bg-gray-200 my-2"></div>
            <button onclick="filterCategory('program')" class="nav-item w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors font-medium text-sm flex justify-between items-center">
                <span>ğŸ’» ç¨‹åºå¡«ç©ºé¢˜</span>
                <span id="count-program" class="text-xs opacity-75 bg-gray-200 px-2 py-0.5 rounded-full">0</span>
            </button>
            <button onclick="filterCategory('single')" class="nav-item w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors font-medium text-sm flex justify-between items-center">
                <span>âœ… å•é€‰é¢˜</span>
                <span id="count-single" class="text-xs opacity-75 bg-gray-200 px-2 py-0.5 rounded-full">0</span>
            </button>
            <button onclick="filterCategory('multi')" class="nav-item w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors font-medium text-sm flex justify-between items-center">
                <span>â˜‘ï¸ å¤šé€‰é¢˜</span>
                <span id="count-multi" class="text-xs opacity-75 bg-gray-200 px-2 py-0.5 rounded-full">0</span>
            </button>
            <button onclick="filterCategory('judge')" class="nav-item w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors font-medium text-sm flex justify-between items-center">
                <span>âš–ï¸ åˆ¤æ–­é¢˜</span>
                <span id="count-judge" class="text-xs opacity-75 bg-gray-200 px-2 py-0.5 rounded-full">0</span>
            </button>
        </nav>
        <div class="p-4 border-t bg-gray-50">
            <div class="text-xs text-gray-500 mb-2">æ€»ç­”é¢˜è¿›åº¦</div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progressBar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
            </div>
            <p id="progressText" class="text-xs text-right mt-1 text-gray-400">0/0</p>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-full overflow-hidden relative bg-gray-50">
        <!-- Header -->
        <header class="bg-white shadow-sm p-4 flex items-center justify-between z-10">
            <div class="flex items-center w-full max-w-2xl bg-gray-100 rounded-lg px-4 py-2">
                <svg class="w-5 h-5 text-gray-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                <input type="text" id="searchInput" placeholder="æœç´¢é¢˜ç›®ï¼ˆå¦‚ï¼šå·ç§¯ã€è¿‡æ‹Ÿåˆ...ï¼‰" class="bg-transparent border-none outline-none w-full text-gray-700 placeholder-gray-400" onkeyup="searchQuestions()">
            </div>
            <div class="ml-4 flex items-center space-x-2">
                <button onclick="resetAll()" class="text-sm text-red-500 hover:text-red-700 font-medium px-3 py-1 hover:bg-red-50 rounded">é‡ç½®æ‰€æœ‰è¿›åº¦</button>
            </div>
        </header>

        <!-- Questions List -->
        <div id="questionsContainer" class="flex-1 overflow-y-auto p-4 md:p-8 space-y-6 pb-20 scroll-smooth">
            <!-- Content will be injected by JS -->
        </div>
    </main>

    <!-- Data & Script -->
    <script>
        // ================= æ•°æ®æº =================
        const questions = [
            // --- ç¨‹åºé¢˜ ---
            {
                id: 1, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "Numpy ä¸ Matplotlib ç»˜å›¾åŸºç¡€",
                content: `import numpy as np\nimport matplotlib.pyplot as plt\n# åˆ›å»º0-10çš„xè½´æ•°æ®\nx = np.    â‘      (10)\nprint(x)\ny1 = x + 0.5\ny2 =  â‘¡  \ny3 = np.log(x + 1)\n\n# ç”Ÿæˆçº¢è‰²çš„è™šçº¿å½¢çŠ¶æ˜¯Xçº¿\nplt.plot(x, y1,"   â‘¢  " )\n# ç”Ÿæˆç»¿è‰²çš„ç‚¹çº¿å½¢çŠ¶æ˜¯*å·\nplt.plot(x, y2, "  â‘£     ")\n# ç”Ÿæˆè“è‰²çš„ç‚¹çº¿å½¢çŠ¶æ˜¯ä¸Šä¸‰è§’å·\nplt.plot(x, y3, " â‘¤  ")\n\nplt.show()`,
                answer: `â‘  arange\nâ‘¡ x * x (æˆ– x**2)\nâ‘¢ r--\nâ‘£ g:*\nâ‘¤ b^:`,
                explanation: "1. `np.arange(10)` ç”Ÿæˆ0-9çš„æ•°ç»„ã€‚\n2. é¢˜ç›®æ³¨é‡Šæåˆ°æŠ›ç‰©çº¿ï¼Œæ•…ä¸ºå¹³æ–¹ã€‚\n3. Matplotlib æ ¼å¼å­—ç¬¦ä¸²ï¼šé¢œè‰²+çº¿å‹+æ ‡è®°ã€‚"
            },
            {
                id: 2, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "éå†æ–‡ä»¶å¤¹ä¸å›¾åƒå¤„ç†",
                content: `import os\nimport cv2\ninput_path = "./imgs"\n# æœç´¢æ–‡ä»¶å¤¹ä¸‹é¢çš„å›¾ç‰‡\nfor root, dirs, files in    â‘   (input_path, topdown=False):\n   for name in files:\n       print(os.path.join(root, name))\n       # å®ç°è·¯å¾„ä¸æ–‡ä»¶åç§°çš„ç»„åˆåŠŸèƒ½\n       cur_img_path =   â‘¡   (root, name)\n       # è¯»å–å›¾ç‰‡\n       img = cv2.  â‘¢ (cur_img_path)\n       if img is None:\n           print("æ— æ³•è¯»å–å›¾ç‰‡")\n       else:\n           size = (500, 500)\n           # å°†å›¾åƒè¿›è¡Œç¼©æ”¾åˆ°å¤§å°500\n           scale_img = cv2.  â‘£    (img, size, interpolation=cv2.INTER_AREA)\n           # æ˜¾ç¤ºå›¾ç‰‡\n           cv2.  â‘¤ ("hello_win", scale_img)\n           cv2.waitKey(1000)`,
                answer: `â‘  os.walk\nâ‘¡ os.path.join\nâ‘¢ imread\nâ‘£ resize\nâ‘¤ imshow`,
                explanation: "è€ƒå¯Ÿ Python `os` æ¨¡å—çš„æ–‡ä»¶éå†ä»¥åŠ OpenCV çš„åŸºæœ¬è¯»å†™ã€ç¼©æ”¾æ“ä½œã€‚"
            },
            {
                id: 3, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "Matplotlib å­å›¾ç»˜åˆ¶",
                content: `plt.   â‘      (221)\nplt.plot(x, y1, "k") \n\nplt.   â‘      (222)\nplt.plot(x, y2, "rs")\n\n# è¿™æ˜¯ç¬¬äºŒä¸ªå­å›¾ï¼Œç»™å‡ºä½ç½®åæ ‡ï¼ˆåº”ä¸ºç¬¬ä¸‰ä¸ªï¼‰\nplt.   â‘      (  â‘¡  )\nplt.plot(x, y3, " â‘¢ ") # ç»¿è‰²çš„è™šçº¿ï¼Œå½¢çŠ¶ä¸ºä¸Šä¸‰è§’\n\nplt.   â‘      (224)\nplt.plot(x, y4, " â‘£  ") # è“è‰²çš„å®çº¿ï¼Œå½¢çŠ¶ä¸ºåœ†ç‚¹\n\n# æ˜¾ç¤ºå›¾åƒ\nplt.  â‘¤ ()`,
                answer: `â‘  subplot\nâ‘¡ 223\nâ‘¢ g^--\nâ‘£ bo-\nâ‘¤ show`,
                explanation: "1. `subplot` ç”¨äºåˆ›å»ºå­å›¾ã€‚\n2. `223` è¡¨ç¤º2è¡Œ2åˆ—ç¬¬3ä¸ªã€‚\n3. é¢œè‰²å­—ç¬¦ï¼šg(ç»¿), b(è“); æ ‡è®°ï¼š^(ä¸‰è§’), o(åœ†ç‚¹)ã€‚"
            },
             {
                id: 4, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "Pandas æ•°æ®æ¡†æ“ä½œ",
                content: `import numpy as np\nimport pandas as pd\ndata = np.arange(1, 16, 1)\ndata =    â‘       # 5è¡Œ3åˆ—çš„æ•°æ®\nindex_name = ['å‚æ•°1','å‚æ•°2','å‚æ•°3','å‚æ•°4','å‚æ•°5']\ndf = pd.DataFrame(index=  â‘¡    , columns=['Mango','Apple','Banana'], data=  â‘¢    )\nprint(df)\nprint(   â‘£       ) # æ‰“å°Bananaè¿™ä¸€åˆ—æ•°æ®\nprint(     â‘¤          ) # æ‰“å°å‚æ•°3è¿™ä¸€è¡Œçš„æ•°æ®`,
                answer: `â‘  data.reshape(5, 3)\nâ‘¡ index_name\nâ‘¢ data\nâ‘£ df['Banana']\nâ‘¤ df.loc['å‚æ•°3']`,
                explanation: "è€ƒå¯Ÿ Numpy çš„ `reshape` å’Œ Pandas DataFrame çš„è¡Œåˆ—ç´¢å¼• (`loc`) æ“ä½œã€‚"
            },
            {
                id: 5, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "OpenCV äººè„¸æ£€æµ‹",
                content: `faces =    â‘        .detectMultiScale(img, 1.3, 5)\nfor x, y, w, h in faces:\n    # æˆªå–äººè„¸éƒ¨åˆ†\n    roi =    â‘¡             \n    cv2.imshow('roi',  â‘¢   ) \n    # å†™å…¥ç›®æ ‡è·¯å¾„\n    cv2.imwrite(   â‘£       , roi)\n    k = cv2.waitKey(1000)\n    if k ==   â‘¤    : # æŒ‰qé”®é€€å‡º\n        break`,
                answer: `â‘  face_clf\nâ‘¡ img[y:y+h, x:x+w]\nâ‘¢ roi\nâ‘£ path_small_sub\nâ‘¤ ord('q')`,
                explanation: "1. ä½¿ç”¨åˆ†ç±»å™¨å¯¹è±¡ `face_clf`ã€‚\n2. å›¾åƒåˆ‡ç‰‡æ˜¯ `[y:y+h, x:x+w]`ã€‚\n3. `ord('q')` è·å–æŒ‰é”®ASCIIç ã€‚"
            },
            {
                id: 6, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "Keras CIFAR-10 æ•°æ®å¤„ç†",
                content: `(train_image, train_label), (test_image, test_label) = cifar10.load_data()\n# ...å½’ä¸€åŒ–...\n# è¿›è¡Œonehotå¤„ç†\nTrain_label_nor = np_utils.    â‘       (train_label) \nTest_label_nor = np_utils.to_categorical(   â‘¡   ) \n\n# æ¨¡å‹åŠ è½½\nmodel =     â‘¢ \n# æ¨¡å‹è¯„ä¼°\nscores = model.evaluate(    â‘£      ,    â‘¤        ) \nprint(scores)`,
                answer: `â‘  to_categorical\nâ‘¡ test_label\nâ‘¢ load_model('cnn_cifar10.h5')\nâ‘£ Test_image_nor\nâ‘¤ Test_label_nor`,
                explanation: "è€ƒå¯Ÿ Keras çš„ `to_categorical`ï¼Œä»¥åŠæ¨¡å‹åŠ è½½ `load_model` å’Œè¯„ä¼° `evaluate`ã€‚"
            },
            {
                id: 7, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "Anaconda ç¯å¢ƒç®¡ç†",
                content: `1. å®‰è£…è½¯ä»¶åŒ…numpyå‘½ä»¤(3ä¸ªå•è¯):        â‘              \n2. Anaconda åˆ—å‡ºå½“å‰ç¯å¢ƒçš„åº“(2ä¸ªå•è¯):   â‘¡       \n3. æ¿€æ´»ç¯å¢ƒpy36(2ä¸ªå•è¯):   â‘¢       \n4. åˆ›å»ºæ–°çš„condaç¯å¢ƒpy36 (1ä¸ªå•è¯): conda   â‘£         -n myenv python=3.8\n5. ä½¿ç”¨æ¸…åæºå®‰è£…tensorflow (åŒ…å): pip install       â‘¤    -i https://pypi.tuna.tsinghua.edu.cn/simple`,
                answer: `â‘  conda install numpy\nâ‘¡ conda list\nâ‘¢ conda activate\nâ‘£ create\nâ‘¤ tensorflow==1.1.14`,
                explanation: "åŸºç¡€çš„ Conda ç¯å¢ƒç®¡ç†å‘½ä»¤ã€‚"
            },
            {
                id: 8, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "Keras çº¿æ€§å›å½’",
                content: `model = keras.Sequential()\nmodel.add(layers.Dense(  â‘     , input_dim=1)) \n# ...\n# è®­ç»ƒæ¨¡å‹\nmodel.fit(x, y,    â‘¡       ) # è®­ç»ƒ 30000é\n# é¢„æµ‹\nmodel.   â‘¢       \nplt.plot(x, model.predict(x),  â‘£        ) # ç»˜åˆ¶é¢„æµ‹y2\n# æ˜¾ç¤ºå›¾ä¾‹\nplt. â‘¤`,
                answer: `â‘  1\nâ‘¡ epochs=30000\nâ‘¢ predict(x)\nâ‘£ 'b-'\nâ‘¤ legend()`,
                explanation: "çº¿æ€§å›å½’è¾“å‡ºå±‚ä¸º1ä¸ªç¥ç»å…ƒã€‚`epochs`æ§åˆ¶è®­ç»ƒè½®æ•°ã€‚"
            },
            {
                id: 9, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "MNIST æ·±åº¦ç¥ç»ç½‘ç»œ",
                content: `(x_train_image, y_train_label), (x_test_image, y_test_label) = _______â‘ ________.load_data()\nmodel = _______â‘¡______________\nmodel.compile(______â‘¢_______________='categorical_crossentropy', optimizer='adam', metrics=['accuracy'])\nscores = model.evaluate(x_Test_normalize,    â‘£   )\nprediction = model._____â‘¤____________________(x_Test)`,
                answer: `â‘  mnist\nâ‘¡ Sequential()\nâ‘¢ loss\nâ‘£ y_Test_OneHot\nâ‘¤ predict_classes (æˆ– predict)`,
                explanation: "æ ‡å‡†çš„ Keras MNIST æµç¨‹ã€‚"
            },
            {
                id: 10, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "å›¾åƒæœç´¢ä¸å±•ç¤º",
                content: `for root, dirs, files in      â‘      (input_path, topdown=False):\n   cur_img_path =      â‘¡     (root, name)\n   img = cv2.     â‘¢(cur_img_path)\n   img = cv2.     â‘£     (img, size, interpolation=cv2.INTER_AREA)\n   cv2.     â‘¤     ("win", img)`,
                answer: `â‘  os.walk\nâ‘¡ os.path.join\nâ‘¢ imread\nâ‘£ resize\nâ‘¤ imshow`,
                explanation: "ä¸é¢˜ç›®2ç±»ä¼¼ï¼Œè€ƒå¯Ÿæ–‡ä»¶æ“ä½œå’ŒOpenCVåŸºç¡€ã€‚"
            },
             {
                id: 11, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "æ•°æ®é›†ç”Ÿæˆä¸é¢„å¤„ç†",
                content: `fp = open(â€œ1.txtâ€, "   â‘      ", encoding="utf-8") # å†™å…¥æ¨¡å¼\n# ...\nlabel =     â‘¡                 # è°ƒç”¨å‡½æ•°è®¡ç®—æ ‡ç­¾\nfp.   â‘¢       ("{0} {1} {2} {3}\\n".format(x1, x2, x3, label))\n# ...\nreturn train_data,    â‘£         \ndata = data /   â‘¤`,
                answer: `â‘  "w"\nâ‘¡ calc_label(x1, x2, x3)\nâ‘¢ write\nâ‘£ train_labels\nâ‘¤ 100`,
                explanation: "æ–‡ä»¶å†™å…¥æ¨¡å¼ä¸º'w'ã€‚å½’ä¸€åŒ–é€šå¸¸é™¤ä»¥æœ€å¤§å€¼ï¼ˆ100åˆ†ï¼‰ã€‚"
            },
            {
                id: 12, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "MNIST å·ç§¯ç¥ç»ç½‘ç»œ (CNN)",
                content: `(x_Train, y_Train) , (x_Test, y_Test) =    â‘      .load_data()\nmodel =      â‘¡          \nmodel.add(Conv2D(filters=16, ...))\n# ...\nmodel.   â‘¢       (loss='categorical_crossentropy', ...)\ntrain_history = model.   â‘£      (x = x_Train4D_normalize, y = y_TrainHot, ...)\nmodel.   â‘¤      ("SaveModel/minist_model_graphic.h5")`,
                answer: `â‘  mnist\nâ‘¡ Sequential()\nâ‘¢ compile\nâ‘£ fit\nâ‘¤ save`,
                explanation: "Keras CNN æ¨¡å‹çš„æ„å»ºï¼ˆSequentialï¼‰ã€ç¼–è¯‘ï¼ˆcompileï¼‰ã€è®­ç»ƒï¼ˆfitï¼‰å’Œä¿å­˜ï¼ˆsaveï¼‰ã€‚"
            },
             {
                id: 13, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "Matplotlib ç»˜åˆ¶å¤šå›¾å½¢",
                content: `plt.plot(x, y1, "   â‘    ",linewidth = 1) # è™šçº¿\nplt.plot(x, y2, "    â‘¡   ",linewidth = 1) # æ–¹å—\nplt.plot(x, y3, "   â‘¢     ",linewidth = 5) # æ˜Ÿå½¢\nplt.plot(x, y4, "  â‘£   ",linewidth = 5) # ä¸‰è§’å½¢\nplt.    â‘¤    ()`,
                answer: `â‘  -- (æˆ– k--)\nâ‘¡ s (æˆ– rs)\nâ‘¢ *\nâ‘£ ^\nâ‘¤ show`,
                explanation: "Matplotlib æ ‡è®°ï¼šs(square), *(star), ^(triangle_up)ã€‚"
            },
            {
                id: 14, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "Dlib äººè„¸ç‰¹å¾æå–",
                content: `detector =      â‘       .get_frontal_face_detector()\ncamera = cv2.      â‘¡          (0)\n# ...\ngray_img = cv2.     â‘¢    (img, cv2.COLOR_BGR2GRAY)\n# ...\ncv2.     â‘£    ('image', face)\nkey = cv2.      â‘¤     (30) & 0xff`,
                answer: `â‘  dlib\nâ‘¡ VideoCapture\nâ‘¢ cvtColor\nâ‘£ imshow\nâ‘¤ waitKey`,
                explanation: "1. `dlib` åº“ã€‚\n2. `VideoCapture` æ‰“å¼€æ‘„åƒå¤´ã€‚\n3. `cvtColor` è½¬æ¢é¢œè‰²ç©ºé—´ã€‚"
            },
            {
                id: 15, category: "program", type: "ç¨‹åºå¡«ç©ºé¢˜", title: "CNN äººè„¸è¯†åˆ«æ¨¡å‹æ„å»º",
                content: `from keras.layers import _________â‘ _______, MaxPooling2D\nfrom keras.optimizers import ______________â‘¡________________\n# ...\nmodel.add(______________â‘¢____________________) # å±•å¹³å±‚\nprint(model.___________â‘£__________________) # è¾“å‡ºæ¦‚å†µ\n# ...\nmodel.compile(..., ________â‘¤_________=['accuracy'])`,
                answer: `â‘  Convolution2D (æˆ– Conv2D)\nâ‘¡ SGD\nâ‘¢ Flatten()\nâ‘£ summary()\nâ‘¤ metrics`,
                explanation: "1. å·ç§¯å±‚ç±»åã€‚\n2. SGDä¼˜åŒ–å™¨ã€‚\n3. `Flatten`ç”¨äºå°†å¤šç»´ç‰¹å¾å±•å¹³è¿æ¥å…¨è¿æ¥å±‚ã€‚"
            },

            // --- å•é€‰é¢˜ (äº¤äº’å¼) ---
            {
                id: 101, category: "single", type: "å•é€‰é¢˜", title: "æœºå™¨å­¦ä¹ ç®—æ³•",
                content: "1. ä¸‹é¢ä¸å±äºæœºå™¨å­¦ä¹ ç®—æ³•çš„æ˜¯ï¼Ÿ",
                options: ["A. çº¿æ€§å›å½’", "B. ä¸‰ç»´å›å½’", "C. æ”¯æŒå‘é‡æœº SVM", "D. å†³ç­–æ ‘"],
                correctIndex: 1, // B
                explanation: "ä¸‰ç»´å›å½’ä¸æ˜¯ä¸€ç§æ ‡å‡†çš„æœºå™¨å­¦ä¹ ç®—æ³•åç§°ï¼Œé€šå¸¸æŒ‡å¤šå˜é‡å›å½’ï¼Œä½†åœ¨æ­¤é€‰é¡¹ä¸­ä½œä¸ºå¹²æ‰°é¡¹ã€‚"
            },
            {
                id: 102, category: "single", type: "å•é€‰é¢˜", title: "æ·±åº¦å­¦ä¹ å…³ç³»",
                content: "2. æ·±åº¦å­¦ä¹ (deep learning)æ˜¯()çš„åˆ†æ”¯ï¼Ÿ",
                options: ["A. æœºå™¨å­¦ä¹ ", "B. è¯­éŸ³è¯†åˆ«", "C. å›¾åƒè¯†åˆ«", "D. åŒ»ç–—å½±åƒ"],
                correctIndex: 0, // A
                explanation: "äººå·¥æ™ºèƒ½ > æœºå™¨å­¦ä¹  > æ·±åº¦å­¦ä¹ ã€‚"
            },
            {
                id: 103, category: "single", type: "å•é€‰é¢˜", title: "ç½‘ç»œç±»å‹",
                content: "3. ä¸‹åˆ—ä¸å±äºæ·±åº¦å­¦ä¹ ç½‘ç»œçš„æ˜¯ï¼Ÿ",
                options: ["A. æ·±åº¦ç¥ç»ç½‘ç»œ", "B. å·ç§¯ç¥ç»ç½‘ç»œ", "C. æœºå™¨å­¦ä¹ "],
                correctIndex: 2, // C
                explanation: "æœºå™¨å­¦ä¹ æ˜¯åŒ…å«æ·±åº¦å­¦ä¹ çš„å¤§ç±»ï¼Œä¸æ˜¯å…·ä½“çš„ç½‘ç»œç»“æ„ã€‚"
            },
            {
                id: 104, category: "single", type: "å•é€‰é¢˜", title: "å›¾åƒè¯†åˆ«ç½‘ç»œ",
                content: "4. å›¾åƒè¯†åˆ«ä¸€èˆ¬é‡‡ç”¨ä»€ä¹ˆç½‘ç»œï¼Ÿ",
                options: ["A. æ·±åº¦ç¥ç»ç½‘ç»œ", "B. å·ç§¯ç¥ç»ç½‘ç»œ", "C. å¾ªç¯ç¥ç»ç½‘ç»œ"],
                correctIndex: 1, // B
                explanation: "CNN (å·ç§¯ç¥ç»ç½‘ç»œ) æœ€é€‚åˆå¤„ç†å›¾åƒæ•°æ®ã€‚"
            },
            {
                id: 105, category: "single", type: "å•é€‰é¢˜", title: "è¯­éŸ³é¢†åŸŸç½‘ç»œ",
                content: "5. è¯­éŸ³é¢†åŸŸä¸€èˆ¬é‡‡ç”¨ä»€ä¹ˆç½‘ç»œï¼Ÿ",
                options: ["A. æ·±åº¦ç¥ç»ç½‘ç»œ", "B. å·ç§¯ç¥ç»ç½‘ç»œ", "C. å¾ªç¯ç¥ç»ç½‘ç»œ"],
                correctIndex: 2, // C
                explanation: "RNN (å¾ªç¯ç¥ç»ç½‘ç»œ) åŠå…¶å˜ä½“ LSTM/GRU é€‚åˆå¤„ç†åºåˆ—æ•°æ®å¦‚è¯­éŸ³ã€‚"
            },
            {
                id: 106, category: "single", type: "å•é€‰é¢˜", title: "æ¿€æ´»å‡½æ•°",
                content: "6. ä»¥ä¸‹å…³äºæ¿€æ´»å‡½æ•°æè¿°æ­£ç¡®çš„æ˜¯ï¼Ÿ",
                options: ["A. è¡¨ç¤ºæ ·æœ¬å’Œé¢„æµ‹ä¹‹é—´çš„åå·®ç¨‹åº¦", "B. æ˜¯éçº¿æ€§å‡½æ•°", "C. æ˜¯çº¿æ€§å‡½æ•°"],
                correctIndex: 1, // B
                explanation: "æ¿€æ´»å‡½æ•°çš„ç›®çš„æ˜¯å¼•å…¥éçº¿æ€§å› ç´ ï¼Œä½¿ç¥ç»ç½‘ç»œèƒ½æ‹Ÿåˆå¤æ‚å‡½æ•°ã€‚"
            },
            {
                id: 107, category: "single", type: "å•é€‰é¢˜", title: "æŸå¤±å‡½æ•°",
                content: "7. ä»¥ä¸‹å…³äºæŸå¤±å‡½æ•°æè¿°æ­£ç¡®çš„æ˜¯ï¼Ÿ",
                options: ["A. ä¸€å®šæ˜¯ä¸€ä¸ªçº¿æ€§å‡½æ•°", "B. ä¸€å®šæ˜¯ä¸€ä¸ªéçº¿æ€§å‡½æ•°", "C. è¡¨ç¤ºæ ·æœ¬å’Œé¢„æµ‹ä¹‹é—´çš„åå·®ç¨‹åº¦"],
                correctIndex: 2, // C
                explanation: "æŸå¤±å‡½æ•°ï¼ˆLoss Functionï¼‰ç”¨æ¥è¡¡é‡æ¨¡å‹é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ã€‚"
            },
            {
                id: 108, category: "single", type: "å•é€‰é¢˜", title: "éå¸¸è§æ¿€æ´»å‡½æ•°",
                content: "8. ä»¥ä¸‹å“ªä¸ªå‡½æ•°ä¸æ˜¯å¸¸è§çš„æ¿€æ´»å‡½æ•°ï¼Ÿ",
                options: ["A. sigmoid", "B. relu", "C. categorical_crossentropy"],
                correctIndex: 2, // C
                explanation: "categorical_crossentropy æ˜¯æŸå¤±å‡½æ•°ï¼Œä¸æ˜¯æ¿€æ´»å‡½æ•°ã€‚"
            },
            {
                id: 109, category: "single", type: "å•é€‰é¢˜", title: "æ± åŒ–",
                content: "9. ä»¥ä¸‹å…³äºæ± åŒ–çš„è¡¨è¿°æ­£ç¡®çš„æ˜¯ï¼Ÿ",
                options: ["A. æ± åŒ–çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥å‡ç»´", "B. ç›®æ ‡å›¾åƒæ¯”åŸå§‹å›¾åƒåƒç´ ç›¸åŒ", "C. ç›®æ ‡åƒç´ çš„å¤§å°ä¸»è¦å–å†³äºæ»¤æ³¢å™¨çª—å£çš„å¤§å°å’Œç§»åŠ¨æ­¥å­çš„å¤§å°"],
                correctIndex: 2, // C
                explanation: "æ± åŒ–ï¼ˆPoolingï¼‰ç”¨äºé™ç»´ï¼Œè¾“å‡ºå¤§å°å–å†³äºçª—å£å¤§å°å’Œæ­¥é•¿ã€‚"
            },
            {
                id: 110, category: "single", type: "å•é€‰é¢˜", title: "CIFAR-10",
                content: "10. å…³äºCIFAR-10æ•°æ®é›†æè¿°æ­£ç¡®çš„æ˜¯ï¼Ÿ",
                options: ["A. å…±60000å¼ 32*32çš„RGBå›¾åƒ", "B. æµ‹è¯•é›†å…±10000å¼ ï¼Œç”¨äºè®­ç»ƒ", "C. è®­ç»ƒé›†å…±50000å¼ ï¼Œç”¨äºæµ‹è¯•"],
                correctIndex: 0, // A
                explanation: "CIFAR-10åŒ…å«60000å¼ 32x32å½©è‰²å›¾åƒï¼Œå…¶ä¸­50000å¼ è®­ç»ƒï¼Œ10000å¼ æµ‹è¯•ã€‚"
            },
            {
                id: 111, category: "single", type: "å•é€‰é¢˜", title: "éçº¿æ€§å¼•å…¥",
                content: "11. ä¸‹åˆ—å“ªä¸€é¡¹åœ¨ç¥ç»ç½‘ç»œä¸­å¼•å…¥äº†éçº¿æ€§ï¼Ÿ",
                options: ["A. éšæœºæ¢¯åº¦ä¸‹é™", "B. ä¿®æ­£çº¿æ€§å•å…ƒ(ReLU)", "C. å·ç§¯å‡½æ•°", "D. ä»¥ä¸Šéƒ½ä¸æ­£ç¡®"],
                correctIndex: 1, // B
                explanation: "ReLU æ˜¯æ¿€æ´»å‡½æ•°ï¼Œå¼•å…¥éçº¿æ€§ã€‚"
            },
            {
                id: 112, category: "single", type: "å•é€‰é¢˜", title: "æ¢¯åº¦ä¸‹é™æ­¥éª¤",
                content: "12. æ¢¯åº¦ä¸‹é™ç®—æ³•çš„æ­£ç¡®æ­¥éª¤æ˜¯ä»€ä¹ˆï¼Ÿ\na. è®¡ç®—è¯¯å·®\nb. é‡å¤è¿­ä»£\nc. ä¼ å…¥è¾“å…¥å¾—åˆ°è¾“å‡º\nd. åˆå§‹åŒ–æƒé‡\ne. è°ƒæ•´æƒé‡",
                options: ["A. abcde", "B. edcba", "C. chaed", "D. dcaeb"],
                correctIndex: 3, // D
                explanation: "åˆå§‹åŒ–(d) -> å‰å‘ä¼ æ’­(c) -> è®¡ç®—è¯¯å·®(a) -> åå‘ä¼ æ’­è°ƒæ•´æƒé‡(e) -> è¿­ä»£(b)ã€‚"
            },
            {
                id: 113, category: "single", type: "å•é€‰é¢˜", title: "æ·±åº¦å­¦ä¹ å®šä¹‰",
                content: "13. ä»€ä¹ˆæƒ…å†µä¸‹ç¥ç»ç½‘ç»œæ¨¡å‹è¢«ç§°ä¸ºæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Ÿ",
                options: ["A. åŠ å…¥æ›´å¤šå±‚ï¼Œä½¿ç¥ç»ç½‘ç»œçš„æ·±åº¦å¢åŠ ", "B. æœ‰ç»´åº¦æ›´é«˜çš„æ•°æ®", "C. å›¾å½¢è¯†åˆ«é—®é¢˜"],
                correctIndex: 0, // A
                explanation: "â€œæ·±åº¦â€æŒ‡ç¥ç»ç½‘ç»œçš„å±‚æ•°è¾ƒå¤šã€‚"
            },
            {
                id: 114, category: "single", type: "å•é€‰é¢˜", title: "DNNç®€ç§°",
                content: "14. æ·±åº¦ç¥ç»ç½‘ç»œè‹±æ–‡ç®€ç§°ä¸ºï¼Ÿ",
                options: ["A. DNN", "B. CNN", "C. RNN", "D. LSTM"],
                correctIndex: 0, // A
                explanation: "Deep Neural Network."
            },
            {
                id: 115, category: "single", type: "å•é€‰é¢˜", title: "CNNç®€ç§°",
                content: "15. å·ç§¯ç¥ç»ç½‘ç»œçš„è‹±æ–‡ç®€å†™ä¸ºï¼Ÿ",
                options: ["A. DNN", "B. CNN", "C. RNN", "D. LSTM"],
                correctIndex: 1, // B
                explanation: "Convolutional Neural Network."
            },
            {
                id: 116, category: "single", type: "å•é€‰é¢˜", title: "RNNç®€ç§°",
                content: "16. å¾ªç¯ç¥ç»ç½‘ç»œçš„è‹±æ–‡ç®€å†™ä¸ºï¼Ÿ",
                options: ["A. DNN", "B. CNN", "C. RNN", "D. LSTM"],
                correctIndex: 2, // C
                explanation: "Recurrent Neural Network."
            },
            {
                id: 117, category: "single", type: "å•é€‰é¢˜", title: "æƒé‡è·å–",
                content: "18. æ€ä¹ˆè·çŸ¥æ¯ä¸ªç¥ç»å…ƒçš„æƒé‡å’Œåç§»ï¼Ÿ",
                options: ["A. æœç´¢æ‰€æœ‰ç»„åˆ", "B. èµ‹äºˆåˆå§‹å€¼ï¼Œæ£€æŸ¥å·®å€¼ï¼Œä¸æ–­è¿­ä»£è°ƒæ•´", "C. éšæœºèµ‹å€¼å¬å¤©ç”±å‘½"],
                correctIndex: 1, // B
                explanation: "è¿™æ˜¯è®­ç»ƒè¿‡ç¨‹ï¼ˆåå‘ä¼ æ’­+æ¢¯åº¦ä¸‹é™ï¼‰çš„æœ¬è´¨ã€‚"
            },
            {
                id: 118, category: "single", type: "å•é€‰é¢˜", title: "è¿‡æ‹Ÿåˆç°è±¡",
                content: "19. å·ç§¯æ ¸æ•°é‡å¢åŠ å¯¼è‡´ç²¾ç¡®åº¦å…ˆå‡åé™ï¼Œå¯èƒ½åŸå› ï¼Ÿ",
                options: ["A. åªæœ‰å°‘éƒ¨åˆ†èµ·ä½œç”¨", "B. å¯¼è‡´è¿‡æ‹Ÿåˆ", "C. é¢„æµ‹èƒ½åŠ›é™ä½"],
                correctIndex: 1, // B
                explanation: "æ¨¡å‹å¤ªå¤æ‚ï¼ˆå‚æ•°å¤ªå¤šï¼‰å®¹æ˜“å¯¼è‡´è¿‡æ‹Ÿåˆã€‚"
            },
            {
                id: 119, category: "single", type: "å•é€‰é¢˜", title: "æ„ŸçŸ¥æœºé¡ºåº",
                content: "20. æ„ŸçŸ¥æœºä»»åŠ¡é¡ºåºï¼Ÿ\n1.åˆå§‹åŒ– 2.ä¸‹ä¸€æ‰¹æ•°æ® 3.è°ƒæ•´æƒé‡ 4.è®¡ç®—è¾“å‡º",
                options: ["A. 1,2,3,4", "B. 4,3,2,1", "C. 1,4,3,2", "D. 3,1,2,4"],
                correctIndex: 2, // C
                explanation: "åˆå§‹åŒ– -> è®¡ç®—è¾“å‡º -> è°ƒæ•´æƒé‡ -> ä¸‹ä¸€æ‰¹ã€‚"
            },
            {
                id: 120, category: "single", type: "å•é€‰é¢˜", title: "éæ¿€æ´»å‡½æ•°",
                content: "21. ä¸‹åˆ—å“ªä¸ªå‡½æ•°ä¸å¯ä»¥åšæ¿€æ´»å‡½æ•°ï¼Ÿ",
                options: ["A. y=tanh(x)", "B. y=sin(x)", "C. y=max(x,0)", "D. y=2x"],
                correctIndex: 3, // D
                explanation: "y=2x æ˜¯çº¿æ€§å‡½æ•°ï¼Œæ— æ³•å¼•å…¥éçº¿æ€§ã€‚"
            },
            {
                id: 121, category: "single", type: "å•é€‰é¢˜", title: "å­¦ä¹ ç‡è¿‡å¤§",
                content: "22. å­¦ä¹ ç‡å¤ªå¤§ä¼šå¯¼è‡´ï¼Ÿ",
                options: ["A. æ”¶æ•›", "B. æ— æ³•æ”¶æ•›", "C. æ”¶æ•›æ…¢"],
                correctIndex: 1, // B
                explanation: "å­¦ä¹ ç‡è¿‡å¤§ä¼šå¯¼è‡´åœ¨æå°å€¼é™„è¿‘éœ‡è¡ç”šè‡³å‘æ•£ã€‚"
            },
            {
                id: 122, category: "single", type: "å•é€‰é¢˜", title: "è¿‡æ‹Ÿåˆè¡¨ç°",
                content: "23. ä»¥ä¸‹ç°è±¡å±äºè¿‡æ‹Ÿåˆçš„æ˜¯ï¼Ÿ",
                options: ["A. è®­ç»ƒLossé™ï¼ŒéªŒè¯Lossä¸å˜", "B. è®­ç»ƒLossé™ï¼ŒéªŒè¯Losså‡", "C. è®­ç»ƒLosså‡ï¼ŒéªŒè¯Losså‡"],
                correctIndex: 1, // B
                explanation: "è®­ç»ƒé›†è¡¨ç°å¥½ï¼ŒéªŒè¯é›†è¡¨ç°å˜å·®ï¼Œæ˜¯å…¸å‹çš„è¿‡æ‹Ÿåˆã€‚"
            },
            {
                id: 123, category: "single", type: "å•é€‰é¢˜", title: "æ¬ æ‹Ÿåˆè¡¨ç°",
                content: "24. å…³äºæ¬ æ‹Ÿåˆï¼Œè¯´æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿ",
                options: ["A. è®­ç»ƒè¯¯å·®å¤§ï¼Œæµ‹è¯•è¯¯å·®å°", "B. è®­ç»ƒè¯¯å·®å°ï¼Œæµ‹è¯•è¯¯å·®å¤§", "C. è®­ç»ƒè¯¯å·®å¤§ï¼Œæµ‹è¯•è¯¯å·®å¤§"],
                correctIndex: 2, // C
                explanation: "æ¨¡å‹æ²¡å­¦å¥½ï¼Œä¸¤è¾¹è¯¯å·®éƒ½å¤§ã€‚"
            },
            {
                id: 124, category: "single", type: "å•é€‰é¢˜", title: "ç®—åŠ›å•ä½",
                content: "25. ç®—åŠ›å•ä½1T (TOPS) æŒ‡æ¯ç§’è¿ç®—å¤šå°‘æ¬¡ï¼Ÿ",
                options: ["A. 10^12", "B. 10^6", "C. 10^9"],
                correctIndex: 0, // A
                explanation: "Tera = 10^12ã€‚"
            },
            {
                id: 125, category: "single", type: "å•é€‰é¢˜", title: "ç°åº¦å›¾å­˜å‚¨",
                content: "38. åˆ†è¾¨ç‡200*300çš„ç°åº¦å›¾åƒå­˜å‚¨é‡ï¼Ÿ",
                options: ["A. 60KBytes", "B. 7.5Kbytes", "C. 120Kbytes", "D. 60KBytes"],
                correctIndex: 3, // D
                explanation: "200 * 300 * 1 Byte = 60000 Bytes = 60KBã€‚"
            },
             {
                id: 126, category: "single", type: "å•é€‰é¢˜", title: "OpenCVæ£€æµ‹å‚æ•°",
                content: "39. face_date.detectMultiScaleå‚æ•°minNeighborsæè¿°é”™è¯¯çš„æ˜¯ï¼Ÿ",
                options: ["A. imageå¾…æ£€æµ‹å›¾åƒ", "B. scaleFactoræ¯”ä¾‹ç³»æ•°", "C. minNeighborsç›¸é‚»çŸ©å½¢æœ€å°ä¸ªæ•°", "D. minNeighborsè®¾ç½®è¶Šå¤§ï¼Œæ£€æµ‹åˆ°äººè„¸å¯èƒ½æ€§è¶Šå°"],
                correctIndex: 3, // D
                explanation: "é¢˜ç›®åŸæ„Dä¸ºé”™è¯¯æè¿°ï¼ˆåå‘é€»è¾‘ï¼‰ï¼ŒminNeighborsè¶Šå¤§ï¼Œæ£€æµ‹è¶Šä¸¥è‹›ï¼Œå¬å›ç‡è¶Šä½ã€‚"
            },

             // --- å¤šé€‰é¢˜ (äº¤äº’å¼) ---
             {
                id: 201, category: "multi", type: "å¤šé€‰é¢˜", title: "æœºå™¨å­¦ä¹ è”ç³»é¢†åŸŸ",
                content: "78. æœºå™¨å­¦ä¹ è·Ÿä¸‹é¢å“ªäº›é¢†åŸŸæœ‰å¾ˆæ·±è”ç³»ï¼Ÿ",
                options: ["A. æ¨¡å¼è¯†åˆ«", "B. ç»Ÿè®¡å­¦ä¹ ", "C. æ•°æ®æŒ–æ˜", "D. è®¡ç®—æœºè§†è§‰"],
                correctIndex: [0, 1, 2, 3], // ABCD
                explanation: "æœºå™¨å­¦ä¹ æ˜¯è¿™äº›é¢†åŸŸçš„æ ¸å¿ƒæ–¹æ³•ã€‚"
            },
            {
                id: 202, category: "multi", type: "å¤šé€‰é¢˜", title: "æ·±åº¦å­¦ä¹ åº”ç”¨",
                content: "79. æ·±åº¦å­¦ä¹ ä¸»è¦åº”ç”¨é¢†åŸŸï¼Ÿ",
                options: ["A. äººè„¸è¯†åˆ«", "B. æ–‡å­—è¯†åˆ«", "C. å›¾åƒè¯†åˆ«", "D. è¯­éŸ³åŠç†è§£"],
                correctIndex: [0, 1, 2, 3], // ABCD
                explanation: "æ¶µç›–äº†CVå’ŒNLPçš„ä¸»è¦æ–¹å‘ã€‚"
            },
            {
                id: 203, category: "multi", type: "å¤šé€‰é¢˜", title: "ç»å…¸ç®—æ³•åº”ç”¨",
                content: "80. æ·±åº¦å­¦ä¹ ç»å…¸ç®—æ³•ä¸»è¦åº”ç”¨åœ¨ï¼Ÿ",
                options: ["A. è®¡ç®—æœºè§†è§‰", "B. è‡ªç„¶è¯­è¨€å¤„ç†", "C. å¼ºåŒ–å­¦ä¹ ", "D. æ¯”ç‰¹å¸"],
                correctIndex: [0, 1, 2], // ABC
                explanation: "æ¯”ç‰¹å¸å±äºåŒºå—é“¾æŠ€æœ¯ã€‚"
            },
            {
                id: 204, category: "multi", type: "å¤šé€‰é¢˜", title: "é¿å…è¿‡æ‹Ÿåˆ",
                content: "83. é¿å…è¿‡æ‹Ÿåˆçš„æ–¹æ³•ï¼Ÿ",
                options: ["A. æ•°æ®å¢å¼º", "B. å¢åŠ è®­ç»ƒæ¬¡æ•°", "C. å¢åŠ ç½‘ç»œæ·±åº¦", "D. æ­£åˆ™åŒ–"],
                correctIndex: [0, 3], // AD
                explanation: "å¢åŠ è®­ç»ƒæ¬¡æ•°å’Œæ·±åº¦é€šå¸¸ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆã€‚æ•°æ®å¢å¼ºå’Œæ­£åˆ™åŒ–ï¼ˆå¦‚Dropout/L2ï¼‰ç”¨äºæŠ‘åˆ¶è¿‡æ‹Ÿåˆã€‚"
            },
             {
                id: 205, category: "multi", type: "å¤šé€‰é¢˜", title: "å·ç§¯å±‚ç‰¹ç‚¹",
                content: "86. å·ç§¯å±‚å…·æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ",
                options: ["A. ç¨€ç–äº¤äº’", "B. å‚æ•°å…±äº«", "C. ç­‰å˜è¡¨ç¤º", "D. ç¨ å¯†äº¤äº’"],
                correctIndex: [0, 1, 2], // ABC
                explanation: "å·ç§¯å±‚æ ¸å¿ƒç‰¹æ€§ï¼šå±€éƒ¨è¿æ¥ï¼ˆç¨€ç–äº¤äº’ï¼‰ã€æƒå€¼å…±äº«ï¼ˆå‚æ•°å…±äº«ï¼‰ã€å¹³ç§»ç­‰å˜ã€‚"
            },
            {
                id: 206, category: "multi", type: "å¤šé€‰é¢˜", title: "CNN vs DNN",
                content: "89. ç›¸å¯¹DNNï¼ŒCNNåšäº†å“ªäº›æ”¹å˜ï¼Ÿ",
                options: ["A. å±€éƒ¨è¿æ¥", "B. ä½¿ç”¨relu", "C. å‚æ•°å…±äº«", "D. å¢åŠ batch normalization"],
                correctIndex: [0, 2], // AC
                explanation: "å±€éƒ¨è¿æ¥å’Œå‚æ•°å…±äº«æ˜¯CNNåŒºåˆ«äºå…¨è¿æ¥ç½‘ç»œçš„ä¸»è¦ç‰¹å¾ã€‚"
            },
            {
                id: 207, category: "multi", type: "å¤šé€‰é¢˜", title: "äººå·¥æ™ºèƒ½ä¸‰è¦ç´ ",
                content: "91. äººå·¥æ™ºèƒ½ä¸‰è¦ç´ åŒ…æ‹¬ï¼Ÿ",
                options: ["A. ç®—æ³•", "B. æœºå™¨äºº", "C. ç®—åŠ›", "D. å¤§æ•°æ®"],
                correctIndex: [0, 2, 3], // ACD
                explanation: "ç®—æ³•ã€ç®—åŠ›ã€æ•°æ®ã€‚"
            },

            // --- åˆ¤æ–­é¢˜ (äº¤äº’å¼) ---
            {
                id: 301, category: "judge", type: "åˆ¤æ–­é¢˜", title: "å·ç§¯ç›®çš„",
                content: "127. å·ç§¯è®¡ç®—çš„ç›®çš„æ˜¯æå–è¾“å…¥çš„ä¸åŒç‰¹å¾ï¼Ÿ",
                options: ["æ­£ç¡®", "é”™è¯¯"],
                correctIndex: 0, // æ­£ç¡®
                explanation: "å·ç§¯æ ¸é€šè¿‡æ»‘åŠ¨çª—å£æå–å±€éƒ¨ç‰¹å¾ã€‚"
            },
            {
                id: 302, category: "judge", type: "åˆ¤æ–­é¢˜", title: "æ•°æ®å¢å¼º",
                content: "128. è®­ç»ƒCNNæ—¶ï¼Œå¯ä»¥å¯¹è¾“å…¥è¿›è¡Œæ—‹è½¬ã€å¹³ç§»ç­‰é¢„å¤„ç†æé«˜æ³›åŒ–èƒ½åŠ›ï¼Ÿ",
                options: ["æ­£ç¡®", "é”™è¯¯"],
                correctIndex: 0, // æ­£ç¡®
                explanation: "è¿™æ˜¯æ•°æ®å¢å¼ºçš„æ ‡å‡†æ“ä½œã€‚"
            },
            {
                id: 303, category: "judge", type: "åˆ¤æ–­é¢˜", title: "Dropout",
                content: "129. æš‚æ—¶ä¸¢å¼ƒç¥ç»å…ƒçš„æ–¹æ³•å«Dropoutï¼Ÿ",
                options: ["æ­£ç¡®", "é”™è¯¯"],
                correctIndex: 0, // æ­£ç¡®
                explanation: "é˜²æ­¢è¿‡æ‹Ÿåˆçš„æŠ€æœ¯ã€‚"
            },
            {
                id: 304, category: "judge", type: "åˆ¤æ–­é¢˜", title: "æ± åŒ–å±‚",
                content: "130. æ± åŒ–å±‚å¯ä»¥å‡å°‘å‚æ•°æ•°é‡ï¼Ÿ",
                options: ["æ­£ç¡®", "é”™è¯¯"],
                correctIndex: 0, // æ­£ç¡®
                explanation: "é€šè¿‡é™ç»´å‡å°‘åç»­å±‚å‚æ•°ã€‚"
            },
            {
                id: 305, category: "judge", type: "åˆ¤æ–­é¢˜", title: "é£æ ¼è¿ç§»",
                content: "135. é£æ ¼è¿ç§»ä¸€èˆ¬æ˜¯ç”»å®¶ç”»å‡ºæ¥ï¼Œä¸èƒ½è®¡ç®—æœºè‡ªåŠ¨å®ç°ï¼Ÿ",
                options: ["æ­£ç¡®", "é”™è¯¯"],
                correctIndex: 1, // é”™è¯¯
                explanation: "æ·±åº¦å­¦ä¹ ï¼ˆå¦‚Style Transferï¼‰å¯ä»¥è‡ªåŠ¨å®ç°ã€‚"
            },
            {
                id: 306, category: "judge", type: "åˆ¤æ–­é¢˜", title: "å¤šå±‚æ„ŸçŸ¥æœºè¯¯å·®",
                content: "138. å¢åŠ MLPéšè—å±‚å±‚æ•°ï¼Œåˆ†ç±»è¯¯å·®ä¾¿ä¼šå‡å°ï¼Ÿ",
                options: ["æ­£ç¡®", "é”™è¯¯"],
                correctIndex: 1, // é”™è¯¯
                explanation: "å±‚æ•°è¿‡å¤šå¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆæˆ–æ¢¯åº¦æ¶ˆå¤±ï¼Œè¯¯å·®ä¸ä¸€å®šå‡å°ï¼Œç”šè‡³å¯èƒ½å˜å¤§ã€‚"
            },
            {
                id: 307, category: "judge", type: "åˆ¤æ–­é¢˜", title: "K-Meansåˆ†ç±»",
                content: "143. K-Meansæ˜¯æœ€æµè¡Œçš„åˆ†ç±»æ–¹æ³•ï¼Ÿ",
                options: ["æ­£ç¡®", "é”™è¯¯"],
                correctIndex: 1, // é”™è¯¯
                explanation: "K-Meansæ˜¯**èšç±»**ï¼ˆæ— ç›‘ç£ï¼‰æ–¹æ³•ï¼Œä¸æ˜¯åˆ†ç±»ï¼ˆç›‘ç£ï¼‰æ–¹æ³•ã€‚"
            },
            {
                id: 308, category: "judge", type: "åˆ¤æ–­é¢˜", title: "å¯è§å…‰",
                content: "148. è®¡ç®—æœºè§†è§‰ä¹Ÿåƒäººç±»ä¸€æ ·ï¼Œåªèƒ½å¤„ç†å¯è§å…‰èŒƒå›´çš„ä¿¡æ¯ï¼Ÿ",
                options: ["æ­£ç¡®", "é”™è¯¯"],
                correctIndex: 1, // é”™è¯¯
                explanation: "CVè¿˜å¯ä»¥å¤„ç†çº¢å¤–ã€Xå…‰ã€æ·±åº¦å›¾ç­‰éå¯è§å…‰ä¿¡æ¯ã€‚"
            },
            {
                id: 309, category: "judge", type: "åˆ¤æ–­é¢˜", title: "å·ç§¯æ ¸å¤§å°",
                content: "161. å¢å¤§å·ç§¯æ ¸çš„å¤§å°å¿…ç„¶ä¼šæé«˜CNNæ€§èƒ½ï¼Ÿ",
                options: ["æ­£ç¡®", "é”™è¯¯"],
                correctIndex: 1, // é”™è¯¯
                explanation: "å·ç§¯æ ¸è¿‡å¤§ä¼šå¢åŠ å‚æ•°é‡ä¸”ä¸¢å¤±å±€éƒ¨ç»†èŠ‚ï¼Œéœ€é€‚ä¸­é€‰æ‹©ï¼ˆå¦‚3x3ï¼‰ã€‚"
            }
        ];

        // ================= é€»è¾‘æ§åˆ¶ =================

        let currentCategory = 'all';
        // å­˜å‚¨ç”¨æˆ·ç­”é¢˜çŠ¶æ€ { questionId: { isAnswered: boolean, isCorrect: boolean, selectedIndices: number[] } }
        let userProgress = {};

        function init() {
            // åŠ è½½è¿›åº¦
            const saved = localStorage.getItem('ai_quiz_progress_v2');
            if (saved) {
                userProgress = JSON.parse(saved);
            }
            updateCounts();
            renderQuestions(questions);
            hljs.highlightAll();
        }

        function updateCounts() {
            const categories = ['program', 'single', 'multi', 'judge'];
            let total = questions.length;
            document.getElementById('count-all').innerText = total;

            categories.forEach(cat => {
                const count = questions.filter(q => q.category === cat).length;
                document.getElementById(`count-${cat}`).innerText = count;
            });

            // è®¡ç®—é”™é¢˜æ•°é‡
            const mistakeCount = Object.values(userProgress).filter(p => p.isAnswered && !p.isCorrect).length;
            document.getElementById('count-mistakes').innerText = mistakeCount;

            // æ›´æ–°è¿›åº¦æ¡
            const answeredCount = Object.keys(userProgress).length;
            const percentage = Math.round((answeredCount / total) * 100);
            document.getElementById('progressBar').style.width = `${percentage}%`;
            document.getElementById('progressText').innerText = `${answeredCount}/${total}`;
        }

        function filterCategory(cat) {
            currentCategory = cat;
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            // ç­›é€‰é€»è¾‘
            let filtered = [];
            if (cat === 'all') {
                filtered = questions;
            } else if (cat === 'mistakes') {
                // ç­›é€‰å‡ºé”™é¢˜ï¼ˆå·²å›ç­”ä¸”é”™è¯¯ï¼‰
                filtered = questions.filter(q => userProgress[q.id] && userProgress[q.id].isAnswered && !userProgress[q.id].isCorrect);
            } else {
                filtered = questions.filter(q => q.category === cat);
            }
            
            renderQuestions(filtered);
            document.getElementById('searchInput').value = '';
        }

        function searchQuestions() {
            const term = document.getElementById('searchInput').value.toLowerCase();
            const filtered = questions.filter(q => 
                q.title.toLowerCase().includes(term) || 
                q.content.toLowerCase().includes(term) ||
                (q.type && q.type.toLowerCase().includes(term))
            );
            renderQuestions(filtered);
        }

        function retryQuestion(qId) {
            // åˆ é™¤è¯¥é¢˜çš„è¿›åº¦è®°å½•
            if (userProgress[qId]) {
                delete userProgress[qId];
                saveProgress();
                
                // åˆ·æ–°ç•Œé¢
                // å¦‚æœå½“å‰åœ¨â€œé”™é¢˜æœ¬â€è§†å›¾ï¼Œè¯¥é¢˜åº”è¯¥æ¶ˆå¤±æˆ–é‡æ–°æ¸²æŸ“ä¸ºæœªåšçŠ¶æ€
                // è¿™é‡Œçš„é€»è¾‘æ˜¯é‡æ–°æ¸²æŸ“å½“å‰è§†å›¾
                if (currentCategory === 'mistakes') {
                    // åœ¨é”™é¢˜æœ¬ä¸­ç‚¹å‡»é‡åšï¼Œé€šå¸¸å¸Œæœ›å®ƒç•™åœ¨åˆ—è¡¨é‡Œå˜æˆæœªåšçŠ¶æ€ï¼Œæˆ–è€…ç§»å‡ºåˆ—è¡¨ï¼Ÿ
                    // æŒ‰ç…§é€šå¸¸é€»è¾‘ï¼Œé‡åšæ„å‘³ç€è¦å†ç­”ä¸€æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ·æ–°è¯¥å¡ç‰‡å³å¯ã€‚
                    // ä½†ç”±äºfilterCategory('mistakes')åªæ˜¾ç¤ºé”™é¢˜ï¼Œåˆ é™¤äº†è®°å½•å°±ä¸ç®—é”™é¢˜äº†ã€‚
                    // ä¸ºäº†è®©ç”¨æˆ·èƒ½ç«‹åˆ»é‡åšï¼Œæˆ‘ä»¬å¯ä»¥æš‚æ—¶ä¸åˆ·æ–°æ•´ä¸ªåˆ—è¡¨ï¼Œåªåˆ·æ–°å•ä¸ªå¡ç‰‡çŠ¶æ€
                    // æˆ–è€…æ›´ç®€å•çš„ï¼šåˆ·æ–°åˆ—è¡¨ï¼Œå®ƒä¼šæ¶ˆå¤±ã€‚ç”¨æˆ·éœ€è¦å»â€œå…¨éƒ¨é¢˜ç›®â€æˆ–è€…åŸåˆ†ç±»é‡Œæ‰¾ã€‚
                    // æ”¹è¿›ï¼šä¸ºäº†ä½“éªŒæ›´å¥½ï¼Œé‡åšæ—¶ä¸è¦ç«‹åˆ»æ¶ˆå¤±ï¼Œè€Œæ˜¯å˜æˆå¯ç¼–è¾‘çŠ¶æ€ï¼Œç›´åˆ°ç­”å¯¹æ‰æ¶ˆå¤±ã€‚
                    // ä½†ç”±äºæ•°æ®é€»è¾‘é™åˆ¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯è®©å®ƒæ¶ˆå¤±æ¯”è¾ƒç¬¦åˆâ€œé”™é¢˜æœ¬â€å®šä¹‰ï¼ˆåªæœ‰é”™çš„æ‰åœ¨é‡Œé¢ï¼‰ã€‚
                    // ç”¨æˆ·å¯ä»¥åœ¨â€œå…¨éƒ¨â€é‡Œæ‰¾åˆ°å®ƒã€‚
                    // ä¿®æ­£ï¼šç”¨æˆ·è¯´â€œç›´åˆ°ä¸å†é”™ä¸ºæ­¢â€ï¼Œè¯´æ˜ç”¨æˆ·å¸Œæœ›åœ¨é”™é¢˜æœ¬é‡Œç›´æ¥é‡åšã€‚
                    // æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ filterCategory çš„é€»è¾‘ï¼Ÿä¸ï¼Œæˆ‘ä»¬ä¿®æ”¹æ•°æ®ç»“æ„æ¯”è¾ƒéº»çƒ¦ã€‚
                    // è®©æˆ‘ä»¬ç®€å•ç‚¹ï¼šé‡åš = æ¸…é™¤è®°å½•ã€‚ç•Œé¢ä¸Šåˆ·æ–°å¡ç‰‡ã€‚
                    refreshCard(qId);
                    
                    // å¦‚æœåœ¨é”™é¢˜æœ¬è§†å›¾ï¼Œæˆ‘ä»¬éœ€è¦ç‰¹åˆ«å¤„ç†ï¼šä¸è¦è®©å¡ç‰‡ç«‹åˆ»æ¶ˆå¤±ï¼Œè€Œæ˜¯å˜æˆåˆå§‹çŠ¶æ€ã€‚
                    // è¿™éœ€è¦æˆ‘ä»¬åœ¨ filterCategory('mistakes') æ—¶ï¼ŒåŒ…å«é‚£äº›åˆšåˆšè¢«é‡ç½®çš„é¢˜ç›®ï¼Ÿ
                    // è¿™æ¯”è¾ƒå¤æ‚ã€‚
                    // æ›¿ä»£æ–¹æ¡ˆï¼šç‚¹å‡»â€œé‡åšâ€åï¼Œåˆ·æ–°å¡ç‰‡ï¼Œå¡ç‰‡å˜ä¸ºæœªåšçŠ¶æ€ã€‚
                    // å¦‚æœæ­¤æ—¶åˆ‡æ¢åˆ†ç±»ï¼Œå®ƒä¼šæ¶ˆå¤±ã€‚å¦‚æœä¸åˆ‡æ¢ï¼Œå®ƒè¿˜åœ¨ã€‚
                } else {
                    refreshCard(qId);
                }
            }
        }

        function renderQuestions(items) {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            if (items.length === 0) {
                let emptyMsg = "ğŸ¤” æœªæ‰¾åˆ°ç›¸å…³é¢˜ç›®";
                if (currentCategory === 'mistakes') {
                    emptyMsg = "ğŸ‰ å¤ªæ£’äº†ï¼ç›®å‰æ²¡æœ‰é”™é¢˜";
                }
                container.innerHTML = `
                    <div class="text-center text-gray-500 mt-10">
                        <p class="text-xl">${emptyMsg}</p>
                        <p class="text-sm mt-2">${currentCategory === 'mistakes' ? 'å»åˆ·é¢˜æŒ‘æˆ˜ä¸€ä¸‹å§' : 'è¯·å°è¯•æ›´æ¢æœç´¢å…³é”®è¯æˆ–åˆ‡æ¢åˆ†ç±»'}</p>
                    </div>`;
                return;
            }

            items.forEach(q => {
                const card = document.createElement('div');
                card.id = `card-${q.id}`;
                card.className = 'bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow duration-300';
                
                // æ ‡ç­¾é¢œè‰²
                let tagColor = 'bg-blue-100 text-blue-800';
                if(q.category === 'program') tagColor = 'bg-purple-100 text-purple-800';
                if(q.category === 'judge') tagColor = 'bg-orange-100 text-orange-800';
                if(q.category === 'multi') tagColor = 'bg-green-100 text-green-800';

                // é¢˜ç›®å†…å®¹æ¸²æŸ“
                let contentHtml = q.content;
                if (q.category === 'program') {
                    contentHtml = `<pre><code class="language-python rounded-lg text-sm">${q.content}</code></pre>`;
                } else {
                    contentHtml = `<div class="text-lg text-gray-800 font-medium whitespace-pre-line">${q.content}</div>`;
                }

                // é€‰é¡¹/ç­”æ¡ˆåŒºåŸŸæ¸²æŸ“
                let interactionHtml = '';
                
                // --- ç¨‹åºé¢˜æ¨¡å¼ ---
                if (q.category === 'program') {
                    interactionHtml = `
                        <div class="mt-4 pt-4 border-t border-gray-100">
                            <button onclick="toggleProgramAnswer(${q.id})" class="flex items-center text-blue-600 hover:text-blue-800 font-medium text-sm focus:outline-none">
                                <span id="btn-text-${q.id}">â–¶ æŸ¥çœ‹ç­”æ¡ˆä¸è§£æ</span>
                            </button>
                            <div id="answer-${q.id}" class="hidden-panel overflow-hidden h-0 mt-2 bg-gray-50 rounded-lg">
                                <div class="p-4">
                                    <div class="mb-2">
                                        <span class="font-bold text-green-600">å‚è€ƒç­”æ¡ˆï¼š</span>
                                        <div class="text-gray-900 mt-1 whitespace-pre-line font-mono bg-white p-2 rounded border">${q.answer}</div>
                                    </div>
                                    ${q.explanation ? `<div class="text-sm text-gray-600"><span class="font-bold text-gray-700">è§£æï¼š</span>${q.explanation}</div>` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                } 
                // --- é€‰æ‹©/åˆ¤æ–­é¢˜æ¨¡å¼ ---
                else {
                    const progress = userProgress[q.id];
                    const isAnswered = progress?.isAnswered;
                    
                    let optionsHtml = '<div class="mt-4 grid gap-2">';
                    q.options.forEach((opt, idx) => {
                        let btnClass = 'option-btn w-full text-left px-4 py-3 rounded-lg bg-white text-gray-700 font-medium';
                        let isDisabled = '';
                        let icon = '';

                        if (isAnswered) {
                            isDisabled = 'disabled';
                            const isSelected = progress.selectedIndices.includes(idx);
                            
                            // æ ·å¼é€»è¾‘
                            if (q.category === 'multi') {
                                if (q.correctIndex.includes(idx)) {
                                    btnClass += ' correct'; 
                                    icon = 'âœ“';
                                } else if (isSelected) {
                                    btnClass += ' wrong'; 
                                    icon = 'âœ•';
                                }
                            } else {
                                if (idx === q.correctIndex) {
                                    btnClass += ' correct';
                                    icon = 'âœ“';
                                } else if (isSelected) {
                                    btnClass += ' wrong';
                                    icon = 'âœ•';
                                }
                            }
                        }

                        optionsHtml += `
                            <button onclick="handleOptionClick(${q.id}, ${idx})" 
                                class="${btnClass}" ${isDisabled}>
                                <div class="flex justify-between items-center">
                                    <span>${opt}</span>
                                    <span>${icon}</span>
                                </div>
                            </button>
                        `;
                    });
                    optionsHtml += '</div>';

                    // æäº¤æŒ‰é’®ï¼ˆä»…å¤šé€‰éœ€è¦ï¼‰
                    let submitBtnHtml = '';
                    if (q.category === 'multi' && !isAnswered) {
                        submitBtnHtml = `
                            <button onclick="submitMultiAnswer(${q.id})" id="submit-${q.id}" class="mt-3 w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors">
                                æäº¤ç­”æ¡ˆ
                            </button>
                        `;
                    }

                    // ç»“æœè§£æé¢æ¿ + é‡åšæŒ‰é’®
                    let resultPanelClass = isAnswered ? '' : 'hidden-panel h-0';
                    let retryBtnHtml = '';
                    // å¦‚æœç­”é”™äº†ï¼Œæˆ–è€…æ˜¯é”™é¢˜æœ¬æ¨¡å¼ï¼Œæ˜¾ç¤ºé‡åšæŒ‰é’®
                    if (isAnswered && !progress.isCorrect) {
                        retryBtnHtml = `
                            <div class="mt-3 text-right">
                                <button onclick="retryQuestion(${q.id})" class="text-sm bg-white border border-red-200 text-red-600 px-3 py-1 rounded hover:bg-red-50 transition-colors flex items-center inline-flex">
                                    <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                                    ç§»å‡ºé”™é¢˜æœ¬ (é‡åš)
                                </button>
                            </div>
                        `;
                    }

                    let resultHtml = `
                        <div id="result-${q.id}" class="${resultPanelClass} overflow-hidden mt-3 bg-blue-50 rounded-lg border border-blue-100 transition-all">
                            <div class="p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-bold ${progress?.isCorrect ? 'text-green-600' : 'text-red-600'}">
                                        ${progress?.isCorrect ? 'ğŸ‰ å›ç­”æ­£ç¡®' : 'âš ï¸ å›ç­”é”™è¯¯'}
                                    </span>
                                </div>
                                <div class="text-sm text-gray-700">
                                    <span class="font-bold">è§£æï¼š</span>${q.explanation || 'æš‚æ— è¯¦ç»†è§£æ'}
                                </div>
                                ${retryBtnHtml}
                            </div>
                        </div>
                    `;

                    interactionHtml = optionsHtml + submitBtnHtml + resultHtml;
                }

                card.innerHTML = `
                    <div class="p-6 ${currentCategory === 'mistakes' ? 'mistake-mode' : ''}">
                        <div class="flex items-center justify-between mb-4">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold ${tagColor}">${q.type}</span>
                            <span class="text-xs text-gray-400">ID: ${q.id}</span>
                        </div>
                        <div class="mb-2">
                            ${contentHtml}
                        </div>
                        ${interactionHtml}
                    </div>
                `;
                container.appendChild(card);
            });
            hljs.highlightAll();
        }

        // ================= äº¤äº’å¤„ç† =================

        // ç¨‹åºé¢˜å¼€å…³
        function toggleProgramAnswer(id) {
            const panel = document.getElementById(`answer-${id}`);
            const btnText = document.getElementById(`btn-text-${id}`);
            if (panel.classList.contains('h-0')) {
                panel.classList.remove('h-0', 'hidden-panel');
                panel.classList.add('h-auto');
                btnText.innerText = "â–¼ æ”¶èµ·ç­”æ¡ˆ";
            } else {
                panel.classList.add('h-0', 'hidden-panel');
                panel.classList.remove('h-auto');
                btnText.innerText = "â–¶ æŸ¥çœ‹ç­”æ¡ˆä¸è§£æ";
            }
        }

        // å•é€‰/åˆ¤æ–­é¢˜ç‚¹å‡»
        function handleOptionClick(qId, optIdx) {
            const q = questions.find(x => x.id === qId);
            if (userProgress[qId]?.isAnswered) return; // å·²ç­”è¿‡

            if (q.category === 'multi') {
                const btn = event.currentTarget;
                if (btn.classList.contains('bg-blue-50')) {
                    btn.classList.remove('bg-blue-50', 'border-blue-500');
                    btn.dataset.selected = 'false';
                } else {
                    btn.classList.add('bg-blue-50', 'border-blue-500');
                    btn.dataset.selected = 'true';
                }
                return;
            }

            const isCorrect = optIdx === q.correctIndex;
            saveAndRefresh(qId, isCorrect, [optIdx]);
        }

        // å¤šé€‰é¢˜æäº¤
        function submitMultiAnswer(qId) {
            const q = questions.find(x => x.id === qId);
            const btns = document.querySelectorAll(`#card-${qId} button[onclick^="handleOptionClick"]`);
            const selectedIndices = [];
            
            btns.forEach((btn, idx) => {
                if (btn.dataset.selected === 'true') selectedIndices.push(idx);
            });

            if (selectedIndices.length === 0) {
                alert("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªé€‰é¡¹");
                return;
            }

            const userSet = selectedIndices.sort().toString();
            const correctSet = q.correctIndex.sort().toString();
            const isCorrect = userSet === correctSet;

            saveAndRefresh(qId, isCorrect, selectedIndices);
        }

        function saveAndRefresh(qId, isCorrect, selectedIndices) {
            userProgress[qId] = {
                isAnswered: true,
                isCorrect: isCorrect,
                selectedIndices: selectedIndices
            };
            saveProgress();
            
            // åˆ·æ–°é€»è¾‘ï¼š
            // å¦‚æœåœ¨é”™é¢˜æœ¬æ¨¡å¼ä¸‹ï¼Œç­”å¯¹äº†ï¼Œè¯¥é¢˜åº”è¯¥æ¶ˆå¤±ï¼ˆä½†ä¸ºäº†åé¦ˆï¼Œå¯æš‚ç•™ä¸€ä¸‹æˆ–ç›´æ¥æ¶ˆå¤±ï¼‰
            // è¿™é‡Œä¸ºäº†ç®€å•å’Œç›´è§‚ï¼Œæˆ‘ä»¬é‡æ–°æ¸²æŸ“åˆ—è¡¨
            // å¦‚æœæ˜¯åœ¨å…¨éƒ¨æ¨¡å¼ä¸‹ï¼Œç­”å®Œäº†æ˜¾ç¤ºè§£æ
            
            if (currentCategory === 'mistakes' && isCorrect) {
                // ç­”å¯¹äº†ï¼Œå»¶æ—¶ç§»é™¤ï¼Œç»™ç”¨æˆ·ä¸€ç‚¹åé¦ˆæ—¶é—´
                refreshCard(qId); // å…ˆæ˜¾ç¤ºæ­£ç¡®çŠ¶æ€
                setTimeout(() => {
                    filterCategory('mistakes'); // ç„¶ååˆ·æ–°åˆ—è¡¨ï¼Œç§»é™¤è¯¥é¢˜
                }, 1500);
            } else {
                refreshCard(qId);
            }
        }
        
        function saveProgress() {
            localStorage.setItem('ai_quiz_progress_v2', JSON.stringify(userProgress));
            updateCounts();
        }

        function refreshCard(qId) {
            // åªåˆ·æ–°å•ä¸ªå¡ç‰‡ä¸å¤ªå®¹æ˜“ï¼ˆå› ä¸ºè¦ç”ŸæˆHTMLï¼‰ï¼Œè¿™é‡Œç®€å•åœ°åˆ·æ–°æ•´ä¸ªåˆ—è¡¨
            // åœ¨æ•°æ®é‡ä¸å¤§çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½æ˜¯å¯ä»¥æ¥å—çš„
            // ä¸ºäº†ä¿æŒæ»šåŠ¨ä½ç½®ï¼Œå¯ä»¥è®°å½•ä¸€ä¸‹
            // å®é™…ä¸Šï¼Œä¸ºäº†ä»£ç ç®€å•ï¼Œæˆ‘ä»¬é‡æ–°æ¸²æŸ“å½“å‰çš„ filter
            const q = questions.find(x => x.id === qId);
            
            // å¦‚æœåœ¨é”™é¢˜æœ¬é‡Œç‚¹å‡»äº†é‡åšï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯å®ƒè¿˜åœ¨åˆ—è¡¨é‡Œ
            // userProgress[qId] æ­¤æ—¶å·²è¢«åˆ é™¤
            // å¦‚æœæ˜¯ mistakes è§†å›¾ï¼Œfilter ä¼šæŠŠå®ƒè¿‡æ»¤æ‰ï¼ˆå› ä¸ºå®ƒå˜æˆæœªç­”äº†ï¼Œä¸ç¬¦åˆ !isCorrectï¼‰
            // æ‰€ä»¥é‡åšæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç‰¹æ®Šå¤„ç†æ¸²æŸ“é€»è¾‘ï¼šæŠŠè¿™ä¸ª ID ä¸´æ—¶åŠ å›å»ï¼Ÿ
            // æˆ–è€…ï¼šç®€å•åœ°æŠŠè§†å›¾åˆ‡æ¢å›â€œå…¨éƒ¨â€å¹¶å®šä½åˆ°è¯¥é¢˜ï¼Ÿ
            // æœ€å¥½çš„ä½“éªŒæ˜¯ï¼šå˜æˆæœªç­”çŠ¶æ€ç•™åœ¨åŸåœ°ã€‚
            
            // ä¿®æ­£æ–¹æ¡ˆï¼šretryQuestion å·²åˆ é™¤è®°å½•ã€‚
            // å¦‚æœå½“å‰æ˜¯ mistakes è§†å›¾ï¼Œåˆ·æ–°ä¼šå¯¼è‡´å®ƒæ¶ˆå¤±ã€‚
            // æˆ‘ä»¬åœ¨ retryQuestion é‡Œå·²ç»å¤„ç†äº†ã€‚
            // è¿™é‡Œä¸»è¦å¤„ç† handleOptionClick åçš„åˆ·æ–°ã€‚
            
            // è·å–å½“å‰æ‰€æœ‰æ˜¾ç¤ºçš„é¢˜ç›®
            let filtered = [];
            if (currentCategory === 'all') {
                filtered = questions;
            } else if (currentCategory === 'mistakes') {
                // è¿™é‡Œæœ‰ä¸ªTrickï¼šä¸ºäº†è®©é‡åšåçš„é¢˜ç›®ï¼ˆæœªç­”çŠ¶æ€ï¼‰æš‚æ—¶æ˜¾ç¤ºåœ¨é”™é¢˜æœ¬é‡Œï¼Œ
                // æˆ‘ä»¬éœ€è¦ä¿®æ”¹ filter é€»è¾‘ï¼Œæˆ–è€…ç®€å•åœ°åªé‡æ–°æ¸²æŸ“
                filtered = questions.filter(q => {
                    // æ˜¾ç¤ºæ¡ä»¶ï¼š(å·²ç­”ä¸”é”™) OR (æœªç­” ä¸” åˆšåˆšè¢«é‡ç½®è¿‡?)
                    // æ— æ³•è¿½è¸ªâ€œåˆšåˆšè¢«é‡ç½®â€ã€‚
                    // æ‰€ä»¥ï¼šé”™é¢˜æœ¬é‡Œç‚¹å‡»é‡åš -> é¢˜ç›®æ¶ˆå¤± -> ç”¨æˆ·å»å…¨éƒ¨é‡Œæ‰¾ã€‚è¿™æ˜¯æœ€ç¨³å¥çš„é€»è¾‘ã€‚
                    // é™¤éæˆ‘ä»¬åŠ ä¸€ä¸ª "pendingRetry" çŠ¶æ€ã€‚
                    return userProgress[q.id] && userProgress[q.id].isAnswered && !userProgress[q.id].isCorrect;
                });
            } else {
                filtered = questions.filter(q => q.category === currentCategory);
            }
            renderQuestions(filtered);
        }

        function resetAll() {
            if(confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ç­”é¢˜è®°å½•å—ï¼Ÿ")) {
                userProgress = {};
                saveProgress();
                filterCategory(currentCategory);
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
